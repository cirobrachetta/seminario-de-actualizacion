<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title> </title>
		<style>
			table {
				background-color: #f3faff;
				border-collapse: collapse;
				margin: 0 auto;
				box-shadow: 0 0 10px rgba(0,0,0,0.2);
				border-radius: 6px;
			}

			.display {
				height: 35px;
			}

			.buttonNum {
				background-color: #e0e0e0;
				color: #000000;
				width: 100%;
				height: 50px;
				font-size: 18px;
				border: none;
			}

			.buttonPoint {
				background-color: #f0f0f0;
				color: #000000;
				width: 100%;
				height: 50px;
				font-size: 18px;
				border: none;
			}

			.buttonOperation {
				background-color: #4d7ea8;
				color: white;
				width: 100%;
				height: 50px;
				font-size: 18px;
				border: none;
			}

			.buttonResult {
				background-color: #36648b;
				color: white;
				width: 100%;
				height: 50px;
				font-size: 18px;
				border: none;
			}

			.buttonClear {
				background-color: #e60000;
				color: white;
				width: 100%;
				height: 40px;
				font-size: 18px;
				border: none;
			}

		</style>
	</head>
	<body>
		
	</body>

	<script>

	class CustomCalculator extends HTMLElement
	{
		constructor()
		{
			super();

			this.table = document.createElement('table');

			this.display = document.createElement('input');
			this.btn1 = document.createElement('button');
			this.btn2 = document.createElement('button');
			this.btn3 = document.createElement('button');
			this.btn4 = document.createElement('button');		
			this.btn5 = document.createElement('button');
			this.btn6 = document.createElement('button');
			this.btn7 = document.createElement('button');
			this.btn8 = document.createElement('button');
			this.btn9 = document.createElement('button');
			this.btn0 = document.createElement('button');
			this.btnPoint = document.createElement('button');
			this.btnDivision = document.createElement('button');
			this.btnMultiplication = document.createElement('button');
			this.btnSub = document.createElement('button');
			this.btnPlus = document.createElement('button');
			this.btnCalculate = document.createElement('button');
			this.btnClear = document.createElement('button');
			

			this.display.type = 'text'; //<input type="text">
			this.display.classList.add("display");
			this.btn1.innerText = '1'; //<button>1</button>
			this.btn1.classList.add("buttonNum");
			this.btn2.innerText = '2'; 
			this.btn2.classList.add("buttonNum");
			this.btn3.innerText = '3'; 
			this.btn3.classList.add("buttonNum");
			this.btn4.innerText = '4'; 
			this.btn4.classList.add("buttonNum");
			this.btn5.innerText = '5'; 
			this.btn5.classList.add("buttonNum");
			this.btn6.innerText = '6';
			this.btn6.classList.add("buttonNum");
			this.btn7.innerText = '7';
			this.btn7.classList.add("buttonNum");
			this.btn8.innerText = '8';
			this.btn8.classList.add("buttonNum"); 
			this.btn9.innerText = '9';
			this.btn9.classList.add("buttonNum"); 
			this.btn0.innerText = '0';
			this.btn0.classList.add("buttonNum"); 
			this.btnPoint.innerText = '.'; 
			this.btnPoint.classList.add("buttonPoint");
			this.btnDivision.innerText = '/'; 
			this.btnDivision.classList.add("buttonOperation");
			this.btnMultiplication.innerText = '*'; 
			this.btnMultiplication.classList.add("buttonOperation");
			this.btnSub.innerText = '-'; //<button>+</button>
			this.btnSub.classList.add("buttonOperation");
			this.btnPlus.innerText = '+'; //<button>+</button>
			this.btnPlus.classList.add("buttonOperation");
			this.btnCalculate.innerText = '='; //<button>=</button>
			this.btnCalculate.classList.add("buttonResult");
			this.btnClear.innerText = 'Borrar';
			this.btnClear.classList.add("buttonClear");


			// armado de estructura

			// Fila 1: Display
			let row1 = this.table.insertRow();
			let cell1 = row1.insertCell();
			cell1.colSpan = 4;
			cell1.appendChild(this.display);

			// Fila 2: 7 8 9 /
			let row2 = this.table.insertRow();
			row2.insertCell().appendChild(this.btn7);
			row2.insertCell().appendChild(this.btn8);
			row2.insertCell().appendChild(this.btn9);
			row2.insertCell().appendChild(this.btnDivision);

			// Fila 3: 4 5 6 *
			let row3 = this.table.insertRow();
			row3.insertCell().appendChild(this.btn4);
			row3.insertCell().appendChild(this.btn5);
			row3.insertCell().appendChild(this.btn6);
			row3.insertCell().appendChild(this.btnMultiplication);

			// Fila 4: 1 2 3 -
			let row4 = this.table.insertRow();
			row4.insertCell().appendChild(this.btn1);
			row4.insertCell().appendChild(this.btn2);
			row4.insertCell().appendChild(this.btn3);
			row4.insertCell().appendChild(this.btnSub);

			// Fila 5: 0 . = +
			let row5 = this.table.insertRow();
			row5.insertCell().appendChild(this.btn0);
			row5.insertCell().appendChild(this.btnPoint);
			row5.insertCell().appendChild(this.btnCalculate);
			row5.insertCell().appendChild(this.btnPlus);

			// Fila 6: AC (ocupa 4 columnas)
			let row6 = this.table.insertRow();
			let acCell = row6.insertCell();
			acCell.colSpan = 4;
			acCell.appendChild(this.btnClear);

			this.appendChild(this.table);

		}

		onButtonCalculateClick(event)
		{
			// this.display.value = eval(this.display.value);
			try 
            {
                this.display.value = eval(this.display.value); // Evalúa la expresión matemática
            } 
            catch 
            {
                this.display.value = "Error";
            }
		}

		onButton1Click(event)
		{
			this.display.value += '1';
		}

		onButton2Click(event)
		{
			this.display.value += '2';
		}

		onButton3Click(event)
		{
			this.display.value += '3';
		}

		onButton4Click(event)
		{
			this.display.value += '4';
		}

		onButton5Click(event)
		{
			this.display.value += '5';
		}

		onButton6Click(event)
		{
			this.display.value += '6';
		}

		onButton7Click(event)
		{
			this.display.value += '7';
		}

		onButton8Click(event)
		{
			this.display.value += '8';
		}

		onButton9Click(event)
		{
			this.display.value += '9';
		}

		onButton0Click(event)
		{
			this.display.value += '0';
		}

		onButtonPointClick(event)
		{
			this.display.value += '.';
		}

		onButtonDivisionClick(event)
		{
			this.display.value += '/';
		}

		onButtonMultiplicationClick(event)
		{
			this.display.value += '*';
		}

		onButtonSubClick(event)
		{
			this.display.value += '-';
		}

		onButtonPlusClick(event)
		{
			this.display.value += '+';
		}

		onButtonClearClick()
		{
			this.display.value = ""
		}

		connectedCallback()
		{
			//Se va a ejecutar siempre cuando el elemento es insertado en el DOM
			//DOM = Arbol de elementos HTML ya como instancias (objetos) de JS.

			this.btn1.onclick = this.onButton1Click.bind(this);
			this.btn2.onclick = this.onButton2Click.bind(this);
			this.btn3.onclick = this.onButton3Click.bind(this);
			this.btn4.onclick = this.onButton4Click.bind(this);
			this.btn5.onclick = this.onButton5Click.bind(this);
			this.btn6.onclick = this.onButton6Click.bind(this);
			this.btn7.onclick = this.onButton7Click.bind(this);
			this.btn8.onclick = this.onButton8Click.bind(this);
			this.btn9.onclick = this.onButton9Click.bind(this);
			this.btn0.onclick = this.onButton0Click.bind(this);
			this.btnPoint.onclick = this.onButtonPointClick.bind(this);
			this.btnDivision.onclick = this.onButtonDivisionClick.bind(this);
			this.btnMultiplication.onclick = this.onButtonMultiplicationClick.bind(this);
			this.btnSub.onclick = this.onButtonSubClick.bind(this);
			this.btnPlus.onclick = this.onButtonPlusClick.bind(this);
			this.btnCalculate.onclick = this.onButtonCalculateClick.bind(this);
			this.btnClear.onclick = this.onButtonClearClick.bind(this);


		}

		disconnectedCallback()
		{
			//Se va a ejecutar siempre que se quite el elemento del documento

			this.btn1.onclick = null;
			this.btn2.onclick = null;
			this.btn3.onclick = null;
			this.btn4.onclick = null;
			this.btn5.onclick = null;
			this.btn6.onclick = null;
			this.btn7.onclick = null;
			this.btn8.onclick = null;
			this.btn9.onclick = null;
			this.btn0.onclick = null;
			this.btnPoint.onclick = null;
			this.btnDivision.onclick = null;
			this.btnMultiplication.onclick = null;
			this.btnSub.onclick = null;
			this.btnPlus.onclick = null;
			this.btnCalculate.onclick = null;
			this.btnClear.onclick = null;

		}

		adoptedCallback()
		{
			//Se va a ejecutar siempre que el elemento se cambie de documento.
		}

		connectedMoveCallback()
		{
			//Se ejecuta cuando se mueve el elemento dentro del DOM
		}

		static get observableAttributes()
		{
			//Solo para publicar cuáles son los atributos que tendría disponible el webcomponent
			//Si es utilizado a través de código HTML
			//Ejemplo: <mi-elemento sabor="acido"> </mi-elemento>

			return ['sabor']
		}

		attributeChangedCallback(attr, newvalue, oldvalue )
		{
			//Manejador de cambios de los valores de los atributos personalizados
		}
	}

	customElements.define('x-calculator', CustomCalculator );

	

	function main()
	{
		document.body.appendChild( new CustomCalculator() );
	}

	window.onload = main;

	</script>
</html>